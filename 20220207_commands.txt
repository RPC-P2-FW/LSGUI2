***************************************************************************************************************** op code = 1
Read board parameters
00000001000000000000000000000000000000000000000000000000000000000000000000000100
98765432109876543210987654321098765432109876543210987654321098765432109876543210
77777777776666666666555555555544444444443333333333222222222211111111110000000000

R | R | LBCB | 5b CMD | R | R | 21*X | 4b board number | 4b mux selector | 3b ADC channel | 10b data | X | R | R

00 0 00001 00 000000000000000000000 0000 0000 000 0000000000 0000000000000000000000000000
98 7 65432 10 987654321098765432109 8765 4321 098 7654321098 7654321098765432109876543210
77 7 77777 77 666666666655555555554 4444 4444 433 3333333322 2222222211111111110000000000

***************************************************************************************************************** op code = 2
read feb adc
00000010000000000000000000000000000000000000000000000000000000000000000000000100
98765432109876543210987654321098765432109876543210987654321098765432109876543210
77777777776666666666555555555544444444443333333333222222222211111111110000000000

R | R | LBCB | 5b CMD | R | R | 21*X | 3b operation | 3b db | 1b db_port | 2b FEB | 1b chip | 3b channel | 10b ADC/DAC value |24*X | R | R

000 00010 00 000000000000000000000 000 000 0 00 0 000 0000000000 000000000000000000000000 00
987 65432 10 987654321098765432109 876 543 2 10 9 876 5432109876 543210987654321098765432 10
777 77777 77 666666666655555555554 444 444 4 44 3 333 3333332222 222222111111111100000000 00

***************************************************************************************************************** op code = 2
diagnostic type a
command
R | R | LBCB | 5b CMD | R | R | 21*X | 4b link board number | 4b diag type | parameters
00100010000000000000000000000000001000100000000000000000000000000000000000000100
on off test pat gen = 40
diag_open_close_win_val 40 downto 33
diag_disabling_tdc_num 40 downto 34
diag_test_sig_sel 40 downto 36

result
R | R | LBCB | 5b CMD | R | R | 21*X | 4b link board number | 4b diag type | 36b diag data | 4b X | 1b 
00 1 00010 00 000000000000000000000 0001 0001 000000000000000000000000000000000000 0000 0
98 7 65432 10 987654321098765432109 8765 4321 098765432109876543210987654321098765 4321 0
77 7 77777 77 666666666655555555554 4444 4444 433333333332222222222111111111100000 0000 0

read value of multichannel counter
11010000110100001101000011010000110100001101000000100010000000000000000000000000001110000000000000000000000000000000000000000100
                                                00100010000000000000000000000000001110000000000000000000000000000000000000000100
D0D0D0D0D0D022000000380000000004

read timming histogram
11010000110100001101000011010000110100001101000000100010000000000000000000000000001110100000000000000000000000000000000000000100
                                                00100010000000000000000000000000001110100000000000000000000000000000000000000100
D0D0D0D0D0D0220000003A0000000004

read logging fifo
11010000110100001101000011010000110100001101000000100010000000000000000000000000001111000000000000000000000000000000000000000100
                                                00100010000000000000000000000000001111000000000000000000000000000000000000000100
D0D0D0D0D0D0220000003C0000000004
***************************************************************************************************************** op code = 3
get firmware ID
R | R | LBCB | 5b CMD | R | R | 21*X | 4b board number
command
00000011000000000000000000000000000000000000000000000000000000000000000000000100
00 0 00011 00 000000000000000000000 0000 000000000000000000000000000000000000000000100
98 7 65432 10 987654321098765432109 8765 432109876543210987654321098765432109876543210
77 7 77777 77 666666666655555555554 4444 444443333333333222222222211111111110000000000

result
firmware id = 33 downto 2
0000001100000000000000000000000000000000000000 00000000000000000000000000000000 00
9876543210987654321098765432109876543210987654 32109876543210987654321098765432 10
7777777777666666666655555555554444444444333333 33332222222222111111111100000000 00

***************************************************************************************************************** op code = 6

On/off Link board number
R | R | LBCB | 5b CMD | R | R | 21*X | 4b board number
command
00000110000000000000000000000000000000000000000000000000000000000000000000000100
00 0 00110 00 000000000000000000000 0000 0000000000000000000000000000000xxxxxxxxx00100
98 7 65432 10 987654321098765432109 8765 432109876543210987654321098765432109876543210
77 7 77777 77 666666666655555555554 4444 444443333333333222222222211111111110000000000








***************************************************************************************************************** op code = 4
remote programming
command
00000100001000000000000000000000000000000000000000000000000000000000000000001100
R | R | LBCB | 5b CMD | R | R | 21b length |
00 0 00100 00 100000000000000000000 000000000000000000000000000000000000000000000 1100
98 7 65432 10 987654321098765432109 876543210987654321098765432109876543210987654 3210
77 7 77777 77 666666666655555555554 444444444333333333322222222221111111111000000 0000

***************************************************************************************************************** op code = 5
phase shift
00100101000000000000000000000000001101111101000000000000000000000000000000000100
R | R | LBCB | 5b CMD | R | R | 21*X | 4b link board number | 1b forward backward | 10b shift value
001 00101 00 000000000000000000000 0001 1 0111110100 0000000000000000000000000000000100
987 65432 10 987654321098765432109 8765 4 3210987654 3210987654321098765432109876543210
777 77777 77 666666666655555555554 4444 4 4444333333 3333222222222211111111110000000000


CONTROL BOARD **************************************************

ADC:
0:	Read control board ADC temp
D0D0D0D0D0D0 01000000000000000004

1:  Read control board ADC +1.0 volt VDD
D0D0D0D0D0D0 01 00 00 00 00 40 00 00 00 04 

         
2:  Read control board ADC +1.8 volt AUX
D0D0D0D0D0D0 01 00 00 00 02 40 00 00 00 04


3:  Read control board ADC +1.0 volt MGTAVCC
D0D0D0D0D0D0 01000000044000000004

4:  Read control board ADC +1.0 volt MGTAVTT
D0D0D0D0D0D001000000064000000004

5:  Read control board ADC +1.8 volt MGTVCCAUX
D0D0D0D0D0D001000000084000000004

6:  Read control board ADC +1.8 volt
D0D0D0D0D0D0010000000A4000000004

7:  Read control board ADC +1.5 volt
D0D0D0D0D0D0 01 00 00 00 0C 40 00 00 00 04

8:  Read control board ADC +3.3 volt
D0D0D0D0D0D0010000000E4000000004

9:  Read control board ADC +2.5 volt
D0D0D0D0D0D0 01 00 00 00 10 40 00 00 00 04

10: Read control board ADC +3.3 volt VDD
D0D0D0D0D0D001000000124000000004

11: Read control board ADC temp sensor 1
D0D0D0D0D0D001000000144000000004

12: Read control board ADC temp sensor 2
D0D0D0D0D0D001000000164000000004

13: Read control board ADC temp sensor 3
D0D0D0D0D0D001000000184000000004

14: Read control board ADC CS1 VOUT
D0D0D0D0D0D0010000001A4000000004

15: Read control board ADC CS2 VOUT
D0D0D0D0D0D0010000001C4000000004

16: Read control board ADC CS3 VOUT
D0D0D0D0D0D0010000001E4000000004

17: Read control board ADC temp sensor 4
D0D0D0D0D0D001000000008000000004

18: Read control board ADC AVDD / 2
D0D0D0D0D0D00100000000C000000004

19: Read control board ADC ground voltage
D0D0D0D0D0D001000000010000000004



FEB:
0: ADC Temperature
D0D0D0D0D0D002000000000000000004
1: ADC channel one (Vth1)
D0D0D0D0D0D002000000001000000004
2: ADC channel two (Vth2)
D0D0D0D0D0D002000000002000000004
3: ADC channel three (Vmon1 / 2)
D0D0D0D0D0D002000000003000000004
4: ADC channel four (Vmon2 / 2)
D0D0D0D0D0D002000000004000000004

1: DAC channel one (Vth1)
D0D0D0D0D0D0020000004010F0000004
2: DAC channel two (Vth2)
D0D0D0D0D0D0020000004020F0000004
3: DAC channel three (Vmon1 / 2)
D0D0D0D0D0D0020000004030F0000004
4: DAC channel four (Vmon2 / 2)
D0D0D0D0D0D0020000004040F0000004

OTHERS:
3: Get Firmware ID
D0D0D0D0D0D003000000000000000004

4: Remote Programming
D0D0D0D0D0D00420000000000000000C


LINK BOARD **************************************************

ADC:
0:  Read Link Board ADC temp
D0D0D0D0D0D021000000200000000004
1:  Read Link board ADC +1.0 volt VDD
D0D0D0D0D0D021000000004000000004
2:  Read Link board ADC +1.8 volt AUX
D0D0D0D0D0D021000000024000000004
3:  Read Link board ADC +1.0 volt MGTAVCC
D0D0D0D0D0D021000000044000000004
4:  Read Link board ADC +1.0 volt MGTAVTT
D0D0D0D0D0D021000000064000000004
5:  Read Link board ADC +1.8 volt MGTVCCAUX
D0D0D0D0D0D021000000084000000004
6:  Read Link board ADC +1.8 volt
D0D0D0D0D0D0210000000A4000000004
7:  Read Link board ADC +1.5 volt
D0D0D0D0D0D0210000000C4000000004
8:  Read Link board ADC +3.3 volt
D0D0D0D0D0D0210000000E4000000004
9:  Read Link board ADC +2.5 volt
D0D0D0D0D0D021000000104000000004
10: Read Link board ADC +3.3 volt VDD
D0D0D0D0D0D021000000124000000004
11: Read Link board ADC temp sensor 1
D0D0D0D0D0D021000000144000000004
12: Read Link board ADC temp sensor 2
D0D0D0D0D0D021000000164000000004
13: Read Link board ADC temp sensor 3
D0D0D0D0D0D021000000184000000004
14: Read Link board ADC CS1 VOUT
D0D0D0D0D0D0210000001A4000000004
15: Read Link board ADC CS2 VOUT
D0D0D0D0D0D0210000001C4000000004
16: Read Link board ADC CS3 VOUT
D0D0D0D0D0D0210000001E4000000004
17: Read Link board ADC temp sensor 4
D0D0D0D0D0D021000000008000000004
18: Read Link board ADC AVDD / 2
D0D0D0D0D0D02100000000C000000004
19: Read Link board ADC ground voltage
D0D0D0D0D0D021000000010000000004

DIAGNOSTIC:
1: Select test signal (0) 0-23
D0D0D0D0D0D022000000220000000004

2: Turn On or Off test pattern generator (1) 0-1 off-on
D0D0D0D0D0D022000000250000000004
2: Turn On or Off test pattern generator (0) 0-1 off-on
D0D0D0D0D0D022000000240000000004

3: Set value of open window and close window (0) (15) 0-15 0-15
D0D0D0D0D0D022000000261E00000004

4: Enable all TDCs
D0D0D0D0D0D022000000280000000004

5: Disable one TDC (0)
D0D0D0D0D0D0220000002A0000000004

12:	read value of multichannel counter
D0D0D0D0D0D022000000380000000004
13: read timming histogram
D0D0D0D0D0D0220000003A0000000004
14: read logging fifo
D0D0D0D0D0D0220000003C0000000004

OTHERS:

3: Get Firmware ID
D0D0D0D0D0D023000000200000000004

4: Remote Programming
D0D0D0D0D0D02420000020000000000C

5: Dynamic Phase Shift Insert Shift Value (300) Forward
D0D0D0D0D0D02500000034B000000004

5: Dynamic Phase Shift Insert Shift Value (300) Backward
D0D0D0D0D0D02500000024B000000004






*****************************************************************************************************************
110100001101000011010000110100001101000011010000
diagnostic type a
11010000110100001101000011010000110100001101000000100010000000000000000000000000001000100000000000000000000000000000000000000100
d0d0d0d0d0d022000000220000000000
read feb adc
11010000110100001101000011010000110100001101000000000010000000000000000000000000000000000000000000000000000000000000000000000100
d0d0d0d0d0d002000000000550000000
Read board parameters
11010000110100001101000011010000110100001101000000000001000000000000000000000000000000000000000000000000000000000000000000000100
d0d0d0d0d0d001000000001540000000
phase shift
11010000110100001101000011010000110100001101000000100101000000000000000000000000001101111101000000000000000000000000000000000100
d0d0d0d0d0d02500000037d000000000
get firmware ID
11010000110100001101000011010000110100001101000000000011000000000000000000000000000000000000000000000000000000000000000000000100
d0d0d0d0d0d0030000000000000003fc
read value of multichannel counter
D0D0D0D0D0D022000000380000000004
read timming histogram
D0D0D0D0D0D0220000003A0000000004
read logging fifo
D0D0D0D0D0D0220000003C0000000004



11010000
11010000
11010000
11010000
11010000
11010000 


00000001
00000000
00000000
00000000
00001100
01000000
00000000
00000000
00000000
00000100



